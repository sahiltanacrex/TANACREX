<?xml version='1.0' encoding='utf-8'?>

<odoo>
  <record id="paperformat_sale_summary_report" model="report.paperformat">
    <field name="name">picking report</field>
    <field name="default" eval="False"/>
    <field name="format">A4</field>
    <field name="page_width">0</field>
    <field name="page_width">0</field>
    <field name="orientation">Landscape</field>
    <field name="margin_top">5</field>
    <field name="margin_bottom">5</field>
    <field name="margin_right">4</field>
    <field name="margin_left">4</field>
    <field name="header_line" eval="False"/>
    <field name="header_spacing">40</field>
    <field name="dpi">90</field>
  </record>

  <record id="tnx_stock_picking" model="ir.actions.report">
    <field name="name">Bon de livraisons</field>
    <field name="model">stock.picking</field>
    <field name="report_type">qweb-pdf</field>
    <field name="report_name">tnx_stock.tnx_stock_picking_template</field>
    <field name="report_file">tnx_stock.tnx_stock_picking_template</field>
    <field name="attachment_use" eval="True"/>
    <field name="binding_model_id" ref="stock.model_stock_picking"/>
    <field name="paperformat_id" ref="tnx_stock.paperformat_sale_summary_report"/>
  </record>


  <!-- <record id="tnx_stock.tnx_stock_picking" model="ir.actions.report">
  </record> -->
  <template id="report_tnx_picking_document">
    <!-- ####odoo defaults#### -->
    <t t-call="tnx_stock.external_layout">
      <div class="page" style="font-size : 13px !important;">
        <!-- TODO here we can create header -->
        <div class="oe_structure"/>
        <t t-if="not company">
          <!-- Multicompany -->
          <t t-if="company_id">
            <t t-set="company" t-value="company_id"/>
          </t>
          <t t-elif="o and 'company_id' in o">
            <t t-set="company" t-value="o.company_id.sudo()"/>
          </t>
          <t t-else="else">
            <t t-set="company" t-value="res_company"/>
          </t>
        </t>
        <div>
          <!-- TODO here we can create header -->

          <div class="body_header">
            <div> <!--class="container"-->
              <div class="row">
                <div class="col-md-6" style="width: 50%;">
                  <img t-if="company.logo" style="max-height:80px" t-att-src="image_data_uri(company.logo)" />
                </div>
                <div class="col-md-4" style="text-align:center; width: 50%;margin-left: 85px;padding-left: 143px;">
                  <div>
                    <span>
                      <t t-if="company.description">
                        <t t-esc="company.description" />
                      </t>
                      <t t-else=""> <br/> SARL
                        au capital de 30 000 000 AR</t>
                    </span>
                    <br />
                  </div>
                  <div t-if="company.stat">
                    <span>RCS 2003B00674 - STAT:</span>
                    <span t-esc="company.stat" />
                  </div>
                  <div t-if="company.nif">
                    <span>NIF:</span>
                    <span t-esc="company.nif" />
                  </div>
                  <div>
                    <span>Lot 18 D Imerinafovoany </span>
                  </div>
                  <div>
                    <span>B.P: 11064 - Tél : </span>
                    <span t-esc="company.phone or company.mobile" />
                  </div>
                  <div>
                    <span>Email: contact@tanacrex.com</span>
                  </div>
                  <div>
                    <span>
                      ANTANANARIVO - MADAGASCAR
                    </span>

                  </div>
                </div>
              </div>
            </div>
          </div>
          <!--  END HEADER  -->
          <br/>
          <div class="row">
            <div class="col-6">
              <div style="font-size:18px; margin-top:20px">
                <b>Delivery note: </b>

                <span t-esc="o.name" />
              </div>
              <div style="font-size:18px;">
                <b>Purchase order N°:</b>
                <span t-esc="o.sale_id.sale_order_partner"/>
              </div>
              <div style="font-size:18px;">
                <b>Delivery date: </b>
                <span t-esc="datetime.datetime.now().strftime('%d/%m/%Y')"/>
              </div>
            </div>
            <div class="col-5" style="border: 1px solid; text-align: center;margin-left: 95px;">
              <b style="font-size: 18px;" t-field="o.partner_id"/>
              <br/>
              <t t-if="o.partner_id.street">
                <span t-field="o.partner_id.street"/>
                <br/>
              </t>
              <t t-if="o.partner_id.street2">
                <span t-field="o.partner_id.street2"/>
                <br/>
              </t>
              <t t-if="o.partner_id.city">
                <span t-field="o.partner_id.city"/>
                <br/>
              </t>
              <t t-if="o.partner_id.state_id">
                <span t-field="o.partner_id.state_id"/>
                <br/>
              </t>
              <t t-if="o.partner_id.zip">
                <span t-field="o.partner_id.zip"/>
                <br/>
              </t>
              <t t-if="o.partner_id.country_id">
                <span t-field="o.partner_id.country_id"/>
                <br/>
              </t>
              <t t-if="o.partner_id.phone">
                <span>Tel: </span>
                <span t-field="o.partner_id.phone"/>
                <br/>
              </t>
              <t t-if="o.partner_id.nif">
                <span>NIF: </span>
                <span t-field="o.partner_id.nif"/>
                <br/>
              </t>
              <t t-if="o.partner_id.stat">
                <span>STAT: </span>
                <span t-field="o.partner_id.stat"/>
                <br/>
              </t>
              <t t-if="o.partner_id.rcs">
                <span>RCS: </span>
                <span t-field="o.partner_id.rcs"/>
                <br/>
              </t>
              <t t-if="o.partner_id.cif">
                <span>CIF: </span>
                <span t-field="o.partner_id.cif"/>
                <br/>
              </t>
              <t t-if="o.partner_id.free_val">
                <span t-field="o.partner_id.free_val"/>
                <br/>
              </t>
            </div>
          </div>
          <!--END AFTER HEADER-->
          <div style="margin-top:50px;" class="text-center">
            <style type="text/css">
              table, th, tr, td {
              border: 1px solid black !important;
              }
            </style>
            <table class="table" clearname="stock_move_table" style="font-size:16px !important;">
              <thead>
                <tr>
                  <th>Modèle(Image)</th>
                  <th>Quantité</th>
                  <th>Reférence</th>
                  <th>Dimension</th>
                  <!--<th>Type</th>-->
                  <th>Designation</th>
                  <th style="width: 250px">Colisage</th>

                </tr>
              </thead>
              <tbody>
                <t t-set="lines" t-value="o.move_line_ids_without_package"/>
                <tr t-foreach="lines" t-as="line">
                  <tr>
                    <td style="padding: 1px">
                      <img
                              t-if="line.product_id.image_1920 or line.product_id.product_tmpl_id.image_1920"
                              t-att-src="image_data_uri(line.product_id.image_1920 or line.product_id.product_tmpl_id.image_1920)"
                              width="95" height="95"/>
                    </td>
                    <td style="text-align: right">
                      <span t-field="line.unit_done"
                            t-options="{'widget': 'float', 'precision': 0}"/>
                    </td>
                    <td>
                      <span t-field="line.product_id.name"/>
<!--                      <span t-field="line.product_id.customer_reference"/>-->
                    </td>
                    <td style="text-align: center">
                      <t t-if="line.product_id.product_tmpl_id.product_type == 'button'">
                        <span t-esc="o.get_right_number(line.product_id.product_tmpl_id.line)"/> L
                      </t>
                      <t t-elif="line.product_id.product_tmpl_id.product_type == 'other'">
                        <span t-esc="o.get_right_number(line.product_id.product_tmpl_id.surface)"/>mm²
                      </t>
                      <t t-else="">
                        <t t-if="line.product_id.product_tmpl_id.form == 'rectangle'">
                          <t t-esc="o.get_right_number(line.product_id.product_tmpl_id.length)"/>mm x <t
                                t-esc="o.get_right_number(line.product_id.product_tmpl_id.wide)"/>mm
                        </t>
                        <t t-elif="line.product_id.product_tmpl_id.form == 'square'">
                          <t t-esc="o.get_right_number(line.product_id.product_tmpl_id.side)"/>mm x <t
                                t-esc="o.get_right_number(line.product_id.product_tmpl_id.side)"/>mm
                        </t>
                        <t t-else="">
                          <t t-esc="o.get_right_number(line.product_id.product_tmpl_id.surface)"/>mm²
                        </t>
                      </t>
                    </td>
                    <!--<td>
                      <span t-field="line.product_id.product_tmpl_id.product_type"/>
                    </td>-->
                    <td>
                      <span t-field="line.product_id.product_type"/>
                    </td>
                    <td>
                      <span t-field="line.colisage"/>
                    </td>

                  </tr>
                </tr>
              </tbody>
            </table>
            <div>
              <span style="font-size:14x;">
                No complaints will be accepted after validation. The goods delivered stay here property of the seller until full payment of the invoice.
              </span>
            </div>
            <br/>
            <div class=" row text-center">
              <div class=" col-4">
                <b>
                  <span>CONTROL</span>
                </b>
              </div>
              <div class=" col-4">
                <b>
                  <span>DELIVERY PERSON</span>
                </b>
              </div>
              <div class=" col-4">
                <b>
                  <span>RECIPIENT</span>
                </b>
              </div>
            </div>

          </div>
          <!-- <div class=" footer o_standard_footer" style="font-size:15px;">
              <div
          class="row text-center">
                  <div class=" col col-12 text-center">
                      <ul
          class=" list-inline">
                          <li class="
          list-inline-item">Page:</li>
                          <li class=" list-inline-item">
          <span class=" page" />
                          </li>
                          <li
          class=" list-inline-item">/</li>
                          <li class="
          list-inline-item">
                              <span class=" topage" />
                          </li>
          </ul>
                  </div>
              </div>
          </div> -->
        </div>
        <div class="footer text-center">
          <div class="text-muted"> Page: <span class="page"/> / <span class="topage"/>
          </div>
        </div>


      </div>

    </t>


  </template>
  <!-- template tsiky  -->
  <template id="tnx_stock_picking_template">
    <t t-call="web.html_container">
      <t t-foreach="docs" t-as="o">
        <t t-set="lang" t-value="o.partner_id.sudo().lang"/>
        <t t-call="tnx_stock.report_tnx_picking_document" t-lang="lang"/>
      </t>
    </t>
  </template>
</odoo>