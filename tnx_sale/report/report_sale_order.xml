<?xml version='1.0' encoding='utf-8'?>

<odoo>
    <template id="report_saleorder_document">
        <t t-set="o" t-value="o.with_context(lang=lang)" />
        <t t-if="not company">
            <t t-if="company_id">
                <t t-set="company" t-value="company_id" />
            </t>
            <t t-elif="o and 'company_id' in o">
                <t t-set="company" t-value="o.company_id.sudo()" />
            </t>
            <t t-else="else">
                <t t-set="company" t-value="res_company" />
            </t>
        </t>

        <div class="header"></div>
        <div class="article mt0 o_report_layout_standard" style="font-size:14px;">
            <div class="header_body">
                <div class="body_header">
                    <div class="container">
                        <div class="row">
                            <div class="col-xs-6">
                                <img t-if="company.logo" style="max-height:80px" t-att-src="image_data_uri(company.logo)" />
                            </div>
                            <div class="col-xs-6" style="margin-left:250px; text-align:center">
                                <div>
                                    <b>
                                        <t t-if="company.description">
                                            <t t-esc="company.description" />
                                        </t>
                                        <t t-else="">Fabricant de boutons et d'étiquettes depuis 1983</t>
                                    </b>
                                    <br />
                                </div>
                                <div t-if="company.stat">
                                    <span>STAT:</span>
                                    <span t-esc="company.stat" />
                                </div>
                                <div t-if="company.nif">
                                    <span>NIF:</span>
                                    <span t-esc="company.nif" />
                                </div>
                                <div>
                                    <span>Lot 18 D Imerinafovoany </span>
                                </div>
                                <div>
                                    <span>B.p.:11064 - Tél : </span>
                                    <span t-esc="company.phone or company.mobile" />
                                </div>
                                <div>
                                    <span>e-mail:contact@tanacrex.com</span>
                                </div>
                                <div>
                                    <span>
                                            ANTANANARIVO -
                                        <b>MADAGASCAR</b>
                                    </span>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br/>
                <div class="row">
                    <div class="col-7">
                        <table style="border: none;">
                            <tr style="font-size:15px; margin-top:20px; ">
                                <td style="border: none; text-align: left;">
                                    <b>Devis:</b>
                                </td>
                                <td style="border: none; text-align: left;">
                                    <span t-esc="o.name"/>
                                </td>
                                <td style="border: none;"></td>
                                <td style="border: none;"></td>
                            </tr>
                            <tr t-if="o.sale_order_partner" style="font-size:14px; margin-top:20px;">
                                <td style="border: none; text-align: left;">
                                    <b>BC Client:</b>
                                </td>
                                <td style="border: none; text-align: left;">
                                    <span t-esc="o.sale_order_partner" />
                                </td>
                                <td style="border: none;"></td>
                                <td style="border: none;"></td>
                            </tr>
                            <tr style="font-size:14px; margin-top:20px;">
                                <td style="border: none; text-align: left;">
                                    <b>Validité:</b>
                                </td>
                                <td style="border: none; text-align: left;">
                                    <span t-esc="o.get_validity_date().strftime('%d/%m/%Y')" />
                                </td>
                                <td style="border: none;"></td>
                                <td style="border: none;"></td>
                            </tr>
                            <tr style="font-size:14px; margin-top:20px;">
                                <td style="border: none; text-align: left;">
                                    <b>Date de fabrication:</b>
                                </td>
                                <td style="border: none; text-align: left;">
                                    <span t-esc="o.get_production_date().strftime('%d/%m/%Y')" />
                                </td>
                                <td style="border: none;">
                                    <b>Date de livraison:</b>
                                </td>
                                <td style="border: none;">
                                    <span t-esc="o.get_delivery_date().strftime('%d/%m/%Y')"/>
                                </td>
                            </tr>
                        </table>

                    </div>
                    <div class="col-4" style="border: 1px solid; text-align: center;">
                        <span t-field="o.partner_id"/>
                        <t t-if="o.partner_id.street">
                            <span t-field="o.partner_id.street"/>
                            <br/>
                        </t>
                        <t t-if="o.partner_id.street2">
                            <span t-field="o.partner_id.street2"/>
                            <br/>
                        </t>
                        <t t-if="o.partner_id.city">
                            <span t-field="o.partner_id.city"/>
                            <br/>
                        </t>
                        <t t-if="o.partner_id.state_id">
                            <span t-field="o.partner_id.state_id"/>
                            <br/>
                        </t>
                        <t t-if="o.partner_id.zip">
                            <span t-field="o.partner_id.zip"/>
                            <br/>
                        </t>
                        <t t-if="o.partner_id.country_id">
                            <span t-field="o.partner_id.country_id"/>
                            <br/>
                        </t>
                        <t t-if="o.partner_id.phone">
                            <span>Tel: </span>
                            <span t-field="o.partner_id.phone"/>
                            <br/>
                        </t>

                        <t t-if="o.partner_id.partner_type == 'ls'">
                            <t t-if="o.partner_id.nif">
                                <span>NIF: </span>
                                <span t-field="o.partner_id.nif"/>
                                <br/>
                            </t>
                            <t t-if="o.partner_id.stat">
                                <span>STAT: </span>
                                <span t-field="o.partner_id.stat"/>
                                <br/>
                            </t>
                            <t t-if="o.partner_id.rcs">
                                <span>RCS: </span>
                                <span t-field="o.partner_id.rcs"/>
                                <br/>
                            </t>
                            <t t-if="o.partner_id.cif">
                                <span>CIF: </span>
                                <span t-field="o.partner_id.cif"/>
                                <br/>
                            </t>
                        </t>
                        <t t-else="">
                            <t t-if="o.partner_id.free_val">
                                <span t-field="o.partner_id.free_val"/>
                                <br/>
                            </t>
                        </t>

                    </div>
                </div>

                <div style="margin-top:15px; margin-bottom:15px">

                    <style type="text/css">
                            th {border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif; text-align: left; padding:5px 5px; text-align: center;}
                            table {width:100%; font-size:13px; border-collapse: collapse;}
                            
                            table td {border: 1px solid #000; border-width:1px; text-align: center; border-top:hidden; border-bottom:hidden}
                            table td:first-child {text-align: center; border-bottom:hidden}
                            table td:last-child {text-align: center;}
                    </style>
                    <br/>
                    <table>
                        <thead>
                            <t t-set="currency" t-value="o.currency_id.name"/>
                            <tr>
                                <th style="border: none"></th>
                                <!-- <th style="border: none"></th> -->
                                <th style="border: none"></th>
                                <th style="border: none"></th>
                                <th style="border: none"></th>
                                <th style="border: none"></th>
                                <th style="border: none"></th>
                                <th style="border: none"></th>
                                <th style="border: none"></th>
                                <th>
                                    <t t-esc="currency" />
                                </th>
                                <th>
                                    <t t-esc="currency" />
                                </th>
                            </tr>
                            <tr style="background-color: rgb(211,209,209);">
                                <th>Image</th>
                                <!-- <th>BON DE LIVRAISON</th> -->
                                <th>Designation</th>
                                <th>Ref Interne</th>
                                <th>Ref Client</th>
                                <th>Hs code</th>
                                <th>Type</th>
                                <th>Dimension</th>
                                <th>Qte</th>
                                <th>Prix Unitaire</th>
                                <th>Montant</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-set="all_type" t-value="o.get_all_type(o.order_line)"/>
                            <t t-foreach="all_type" t-as="type">
                                <t t-set="total_price_type" t-value="o.get_total_price_type(o.order_line,type)"/>
                                <t t-foreach="o.order_line" t-as="line">
                                    <!-- <t t-set="bl_id" t-value="o.get_delivery_order_id(line.order_origin)" />
                                                <t t-foreach="bl_id" t-as="id_bl"> -->

                                    <!-- <t t-set="bl_name" t-value="o.get_bl_name(id_bl)" /> -->
                                    <t t-if="line.product_id.product_type == type">
                                        <tr>
                                            <td style="overflow: hidden;">
                                                <t t-if="line.product_id.image_1920">
                                                    <img t-att-src="image_data_uri(line.product_id.image_1920)" style="max-height: 80%; max-width: 80%; margin-bottom:1px"/>
                                                </t>
                                                <t t-else=""></t>
                                            </td>
                                            <!-- <td>
                                                    <span t-esc="line.picking_name" />
                                                </td> -->
                                            <td>
                                                <t t-esc="line.product_id.name" />
                                            </td>
                                            <td>
                                                <t t-esc="line.product_id.default_code" />
                                            </td>
                                            <td>
                                                <t t-esc="line.product_id.customer_reference" />
                                            </td>
                                            <td>
                                                <t t-esc="line.product_id.hs_code.hs_code" />
                                            </td>
                                            <td>
                                                <span t-field="line.product_id.product_type" />
                                            </td>
                                            <td>
                                                <t t-if="line.product_id.product_type == 'button'">
                                                    <t t-esc="o.get_right_number(line.product_id.product_tmpl_id.line)"/>
                                                    L
                                                </t>
                                                <t t-elif="line.product_id.product_type == 'other'">
                                                    <t t-esc="o.get_right_number(line.product_id.product_tmpl_id.surface)"/>
                                                    mm²
                                                </t>
                                                <t t-else="">
                                                    <t t-if="line.product_id.product_tmpl_id.form == 'rectangle'">
                                                        <t t-esc="o.get_right_number(line.product_id.product_tmpl_id.length)"/>
                                                    mm x <t t-esc="o.get_right_number(line.product_id.product_tmpl_id.wide)"/>
                                                    mm
                                                    </t>
                                                    <t t-elif="line.product_id.product_tmpl_id.form == 'square'">
                                                        <t t-esc="o.get_right_number(line.product_id.product_tmpl_id.side)"/>mm x <t t-esc="o.get_right_number(line.product_id.product_tmpl_id.side)"/>
                                                        mm
                                                    </t>
                                                    <t t-else="">
                                                        <t t-esc="o.get_right_number(line.product_id.product_tmpl_id.surface)"/>
                                                        mm²
                                                    </t>
                                                </t>
                                            </td>
                                                <td>
                                                    <t t-esc="o.get_right_number(line.unit_qty)" />
                                                </td>
                                                <td>
                                                    <t t-esc="o.get_right_number(line.price_unit)"/>
                                                    <t t-esc="o.currency_id.symbol"/>/                                                   <t t-esc="line.product_uom.name"/>
                                                </td>
                                                <td>
                                                    <t t-esc="o.get_right_number(line.price_subtotal)"/>
                                                    <t t-esc="o.currency_id.symbol"/>
                                                </td>
                                            </tr>
                                            <!-- </t> -->
                                        </t>
                                    </t>
                                    <tr t-if="len(all_type) > 1">
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td>Sous-total</td>
                                        <td></td>
                                        <td>
                                            <t t-esc="o.get_right_number(total_price_type)"/>
                                            <t t-esc="o.currency_id.symbol"/>
                                        </td>
                                    </tr>
                                </t>

                                <t t-set="total_price_type_false" t-value="o.get_total_price_type(o.order_line, False)"/>
                                <t t-foreach="o.order_line" t-as="line">
                                    <!-- <t t-set="bl_id" t-value="o.get_delivery_order_id(line.order_origin)" /> -->
                                    <!-- <t t-foreach="bl_id" t-as="id_bl">
                                            <t t-set="bl_name" t-value="o.get_bl_name(id_bl)" /> -->
                                    <t t-if="line.product_id.product_type == False and line.price_unit != 0">
                                        <tr>
                                            <td style="overflow: hidden;">
                                                <t t-if="line.product_id.image_1920">
                                                    <img t-att-src="image_data_uri(line.product_id.image_1920)" style="max-height: 80%; max-width: 80%; margin-bottom:1px"/>
                                                </t>
                                                <t t-else=""></t>
                                            </td>
                                            <!-- <td>
                                                    <span t-esc="line.picking_name" />
                                                </td> -->
                                            <td>
                                                <t t-esc="line.product_id.name" />
                                            </td>
                                            <td>
                                                <t t-esc="line.product_id.default_code" />
                                            </td>
                                            <td>
                                                <t t-esc="line.product_id.customer_reference" />
                                            </td>
                                            <td>
                                                <t t-esc="line.product_id.hs_code.name" />
                                            </td>
                                            <td>
                                                <t t-esc="line.product_id.product_type" />
                                            </td>
                                            <td></td>
                                            <td>
                                                <!-- <t t-if="line.product_id.product_tmpl_id.length != 0 and line.product_id.product_tmpl_id.height != 0" t-esc="line.product_id.product_tmpl_id.length"/>mm x <t t-esc="line.product_id.product_tmpl_id.height"/>mm -->
                                            </td>
                                            <td>
                                                <t t-esc="o.get_right_number(line.quantity)" />
                                            </td>

                                            <td>
                                                <t t-esc="o.get_right_number(line.price_unit)"/>
                                                <t t-esc="o.currency_id.symbol"/>
                                            </td>
                                            <td>
                                                <t t-esc="o.get_right_number(line.price_subtotal)"/>
                                                <t t-esc="o.currency_id.symbol"/>
                                            </td>
                                        </tr>
                                    </t>
                                    <!-- </t> -->
                                </t>
                                <tr t-if="total_price_type_false">
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td>
                                        <t t-esc="o.get_right_number(total_price_type_false)"/>
                                        <t t-esc="o.currency_id.symbol"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="border-bottom: 1px solid #000;"></td>
                                    <td style="border-bottom: 1px solid #000;"></td>
                                    <td style="border-bottom: 1px solid #000;"></td>
                                    <td style="border-bottom: 1px solid #000;"></td>
                                    <td style="border-bottom: 1px solid #000;"></td>
                                    <td style="border-bottom: 1px solid #000;"></td>
                                    <td style="border-bottom: 1px solid #000;"></td>
                                    <td style="border-bottom: 1px solid #000;"></td>
                                    <td style="border-bottom: 1px solid #000;"></td>
                                    <td style="border-bottom: 1px solid #000;"></td>
                                </tr>
                                <tr t-if="total_price_type_false">
                                    <td style="border:none"></td>
                                    <td style="border:none"></td>
                                    <td style="border:none"></td>
                                    <td style="border:none"></td>
                                    <td style="border:none"></td>
                                    <td style="border:none"></td>
                                    <td style="border:none"></td>
                                    <td style="border: 1px solid #000;">Sub-total</td>
                                    <td style="border: 1px solid #000;"></td>
                                    <td style="border: 1px solid #000;">
                                        <t t-esc="o.get_right_number(total_price_type_false)"/>
                                        <t t-esc="doc.currency_id.symbol"/>
                                    </td>
                                </tr>
                                <tr/>
                                <t t-if="o.partner_id.partner_type == 'ls'">
                                    <tr>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border: 1px solid #000;">Tax 20%</td>
                                        <td style="border: 1px solid #000;"></td>
                                        <td style="border: 1px solid #000;">
                                            <t t-esc="o.get_right_number(o.amount_tax)"/>
                                            <t t-esc="o.currency_id.symbol"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border: 1px solid #000;">Montant TTC</td>
                                        <td style="border: 1px solid #000;"></td>
                                        <td style="border: 1px solid #000;">
                                            <t t-esc="o.get_right_number(o.amount_total)"/>
                                            <t t-esc="o.currency_id.symbol"/>
                                        </td>
                                    </tr>
                                </t>
                                <t t-else="">
                                    <tr>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border:none"></td>
                                        <td style="border: 1px solid #000;">Montant Total</td>
                                        <td style="border: 1px solid #000;"></td>
                                        <td style="border: 1px solid #000;">
                                            <b>
                                                <t t-esc="o.get_right_number(o.amount_total)"/>
                                                <t t-esc="o.currency_id.symbol"/>
                                            </b>

                                        </td>
                                    </tr>
                                </t>

                                <!-- <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td>AIR FREIGHT</td>
                                        <td></td>
                                        <td>
                                            <t t-set="air_freight_price" t-value="o.env.ref('tnx_sale.product_air_freight').list_price"/>
                                            <t t-esc="air_freight_price" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}" />
                                        </td>
                                    </tr> -->
                            </tbody>
                        </table>
                    </div>
                    <!-- <h4>
                        <div style="text-align:right">
                        <t t-set="amount_total_with_air_freight" t-value="o.total_amount_ex(air_freight_price, o.amount_total)"/>
                            <b>
                                Montant HT:
                                <span t-esc="int(o.amount_total)" t-options="{'widget': 'monetary', 'display_currency': o.currency_id}" />
                            </b>
                        </div>
                    </h4> -->
                    <div style="text-align:right">
                        <!-- <span>A approuvé cette facture pour la somme de </span> -->
                        <!-- <span t-esc="o.currency_id.with_context(lang=o.partner_id.lang or 'en_US').amount_to_text(amount_total_with_air_freight).upper()" /> -->
                        <span t-esc="o.currency_id.with_context(lang=o.partner_id.lang or 'en_US').amount_to_text(o.amount_total).upper()" />
                    </div>
                    <br/>
                    <div t-if="o.payment_method">
                        <span> Paiement: </span>
                        <span t-field="o.payment_method"/>
                    </div>
                    <t t-set="bank_company_ids" t-value="o.get_bank_ids()"/>
                    <t t-if="bank_company_ids">

                        <div class="row">
                            <t t-foreach="bank_company_ids" t-as="bank">
                                <div class="col-6" style="text-align: center;">
                                    <style type="text/css">
                                                p {margin-bottom: 0em;}
                                    </style>
                                    <br/>
                                    <div style="text-align: center;">
                                        <span t-esc="bank.bank_address"/>
                                    </div>
                                    <span>IBAN </span>
                                    <span t-esc="bank.bank_company_line_ids[0].account_registration"/>


                                </div>
                            </t>
                        </div>


                    </t>
                    <div class="row text-center">

                    </div>
                </div>
                <br/>
                <div class="row text-center">
                    <div class="col col-12 text-center">
                        <span>Tous les frais bancaires de la banque étrangère doivent être payés par l'acheteur, y compris remboursement des frais bancaires, des commissions, des fax et des frais postaux correspondants.</span>
                    </div>
                </div>
            </div>
            <div class="footer" style="border-top: 2px solid black; font-size:16px;">
                <div class="row text-center">
                    <div class="col col-12 text-center">
                        <ul class="list-inline">
                            <li class="list-inline-item">Page:</li>
                            <li class="list-inline-item">
                                <span class="page" />
                            </li>
                            <li class="list-inline-item">/</li>
                            <li class="list-inline-item">
                                <span class="topage" />
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

        </template>

        <template id="report_saleorder_inherit" inherit_id="sale.report_saleorder">

            <xpath expr="//t[@t-call='web.html_container']" position="replace">
                <t t-call="web.html_container">
                    <t t-foreach="docs" t-as="o">
                        <t t-if="env.context.get('proforma', False)">
                            <t t-set="doc" t-value="o"/>
                            <t t-call="tnx_sale.report_saleorder_document_proforma" t-lang="o.partner_id.lang"/>
                        </t>
                        <t t-else="">
                            <t t-call="tnx_sale.report_saleorder_document" t-lang="o.partner_id.lang"/>
                        </t>

                    </t>
                </t>
            </xpath>
        </template>

        <template id="report_saleorder_pro_forma_tnx" inherit_id="sale.report_saleorder_pro_forma">
            <xpath expr="//t[@t-call='web.html_container']" position="replace">
                <t t-call="web.html_container">
                    <!-- <t t-set="is_pro_forma" t-value="True"/> -->
                    <t t-set="docs" t-value="docs.with_context(proforma=True)"/>
                    <t t-foreach="docs" t-as="doc">
                        <t t-call="tnx_sale.report_saleorder_document_proforma" t-lang="doc.partner_id.lang"/>
                    </t>
                </t>
            </xpath>

        </template>
        <template id="report_saleorder_document_proforma">
            <t t-set="doc" t-value="doc.with_context(lang=lang)"/>
            <t t-if="not company">
                <t t-if="company_id">
                    <t t-set="company" t-value="company_id" />
                </t>
                <t t-elif="doc and 'company_id' in doc">
                    <t t-set="company" t-value="doc.company_id.sudo()" />
                </t>
                <t t-else="else">
                    <t t-set="company" t-value="res_company" />
                </t>
            </t>
            <div class="header"></div>

            <!-- Client type vl -->
            <t t-if="doc.partner_id.partner_type == 'vl'">
                <div class="article mt0 o_report_layout_standard" style="font-size:14px;">
                    <div class="header_body">
                        <div class="body_header">
                            <div class="container">
                                <div class="row">
                                    <div class="col-xs-6">
                                        <img t-if="company.logo" style="max-height:80px" t-att-src="image_data_uri(company.logo)" />
                                    </div>
                                    <div class="col-xs-6" style="margin-left:250px; text-align:center">
                                        <div>
                                            <b>
                                                <t t-if="company.description">
                                                    <t t-esc="company.description" />
                                                </t>
                                                <t t-else="">Fabricant de boutons et d'étiquettes depuis 1983</t>
                                            </b>
                                            <br />
                                        </div>
                                        <div t-if="company.stat">
                                            <span>STAT:</span>
                                            <span t-esc="company.stat" />
                                        </div>
                                        <div t-if="company.nif">
                                            <span>NIF:</span>
                                            <span t-esc="company.nif" />
                                        </div>
                                        <div>
                                            <span>Lot 18 D Imerinafovoany </span>
                                        </div>
                                        <div>
                                            <span>B.p.:11064 - Tél : </span>
                                            <span t-esc="company.phone or company.mobile" />
                                        </div>
                                        <div>
                                            <span>e-mail:contact@tanacrex.com</span>
                                        </div>
                                        <div>
                                            <span>
                                        ANTANANARIVO -
                                                <b>MADAGASCAR</b>
                                            </span>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br/>
                        <div class="row">
                            <div class="col-6">
                                <div style="font-size:18px; margin-top:20px">
                                    <b>Facture: </b>
                                    <span>PROFORMA /</span>
                                    <span t-esc="doc.name" />
                                </div>
                                <div style="font-size:18px; margin-top:20px">
                                    <b>Référence:</b>
                                    <span t-esc="doc.name" />
                                </div>
                            </div>
                            <div class="col-5" style="border: 1px solid; text-align: center;">
                                <span t-field="doc.partner_id"/>
                                <t t-if="doc.partner_id.street">
                                    <span t-field="doc.partner_id.street"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.street2">
                                    <span t-field="doc.partner_id.street2"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.city">
                                    <span t-field="doc.partner_id.city"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.state_id">
                                    <span t-field="doc.partner_id.state_id"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.zip">
                                    <span t-field="doc.partner_id.zip"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.country_id">
                                    <span t-field="doc.partner_id.country_id"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.phone">
                                    <span>Tel: </span>
                                    <span t-field="doc.partner_id.phone"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.vat">
                                    <span>V.A.T: </span>
                                    <span t-field="doc.partner_id.vat"/>
                                    <br/>
                                </t>
                            </div>
                        </div>


                        <div style="margin-top:15px; margin-bottom:15px">
                            <style type="text/css">
                            th {border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif; text-align: left; padding:5px 5px; text-align: center;}
                            table {width:100%; font-size:13px; border-collapse: collapse;}
                            
                            table td {border: 1px solid #000; border-width:1px; text-align: center; border-top:hidden; border-bottom:hidden}
                            table td:first-child {text-align: center; border-bottom:hidden}
                            table td:last-child {text-align: center;}
                            </style>
                            <table>
                                <thead>
                                    <t t-set="currency" t-value="doc.currency_id.name"/>
                                    <tr>
                                        <th style="border: none"></th>
                                        <th style="border: none"></th>
                                        <th style="border: none"></th>
                                        <th style="border: none"></th>
                                        <th style="border: none"></th>
                                        <th>
                                            <t t-esc="currency"/>
                                        </th>
                                        <th>
                                            <t t-esc="currency"/>
                                        </th>
                                    </tr>
                                    <tr style="background-color: rgb(211,209,209);">
                                        <th>BC</th>
                                        <th>Désignation</th>
                                        <th>Type</th>
                                        <th>Dimension</th>
                                        <th>Qté</th>
                                        <th>Prix Unitaire</th>
                                        <th>Montant</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- <t t-set="val" t-value="doc.get_all_order_line(doc.order_line)"/> -->
                                    <t t-set="all_type" t-value="doc.get_all_type(doc.order_line)"/>
                                    <t t-foreach="all_type" t-as="type">
                                        <t t-set="total_price_type" t-value="doc.get_total_price_type(doc.order_line,type)"/>
                                        <t t-foreach="doc.order_line" t-as="line">
                                            <!-- <t t-set="bl_id" t-value="doc.get_delivery_order_id(line.order_origin)" /> -->
                                            <!-- <t t-foreach="bl_id" t-as="id_bl">
                                        <t t-set="bl_name" t-value="doc.get_bl_name(id_bl)" /> -->
                                            <t t-if="line.product_id.product_type == type">
                                                <tr>
                                                    <td>
                                                        <t t-if="line.order_id.sale_order_partner">
                                                            <span t-esc="line.order_id.sale_order_partner"/>
                                                        </t>
                                                        <t t-else="">
                                                            <span>-</span>
                                                        </t>
                                                    </td>
                                                    <td>
                                                        <t t-esc="line.product_id.name"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="line.product_id.product_type"/>
                                                    </td>
                                                    <td>
                                                        <t t-if="line.product_id.product_type == 'button'">
                                                    <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.line)"/>
                                                    L
                                                </t>
                                                <t t-elif="line.product_id.product_type == 'other'">
                                                    <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.surface)"/>
                                                    mm²
                                                </t>
                                                <t t-else="">
                                                    <t t-if="line.product_id.product_tmpl_id.form == 'rectangle'">
                                                        <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.length)"/>
                                                    mm x <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.wide)"/>
                                                    mm
                                                    </t>
                                                    <t t-elif="line.product_id.product_tmpl_id.form == 'square'">
                                                        <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.side)"/>mm x <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.side)"/>
                                                        mm
                                                    </t>
                                                    <t t-else="">
                                                        <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.surface)"/>
                                                        mm²
                                                    </t>
                                                </t>
                                                    </td>
                                                    <td>
                                                        <t t-esc="doc.get_right_number(line.unit_qty)"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="doc.get_right_number(line.price_unit)"/>
                                                        <t t-esc="doc.currency_id.symbol"/>
                                                /                                                        <t t-esc="line.product_uom.name"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="doc.get_right_number(line.price_subtotal)"/>
                                                        <t t-esc="doc.currency_id.symbol"/>
                                                    </td>
                                                </tr>

                                            </t>
                                            <!-- </t> -->
                                        </t>
                                        <tr t-if="len(all_type) > 1">
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td>Sous-total</td>
                                            <td></td>
                                            <td>
                                                <t t-esc="doc.get_right_number(total_price_type)"/>
                                                <t t-esc="doc.currency_id.symbol"/>
                                            </td>
                                        </tr>
                                    </t>
                                    <t t-set="total_price_type_false" t-value="doc.get_total_price_type(doc.order_line, False)"/>
                                    <t t-foreach="doc.order_line" t-as="line">
                                        <!-- <t t-set="bl_id" t-value="doc.get_delivery_order_id(line.order_origin)" /> -->
                                        <!-- <t t-foreach="bl_id" t-as="id_bl">
                                    <t t-set="bl_name" t-value="doc.get_bl_name(id_bl)" /> -->
                                        <t t-if="line.product_id.product_type == False and line.price_unit != 0">
                                            <tr>
                                                <td>
                                                    <t t-if="line.order_id.sale_order_partner">
                                                        <span t-esc="line.order_id.sale_order_partner"/>
                                                    </t>
                                                    <t t-else="">
                                                        <span>-</span>
                                                    </t>
                                                </td>
                                                <td>
                                                    <span t-esc="line.picking_name"/>
                                                </td>
                                                <td>
                                                    <t t-esc="line.product_id.product_type"/>
                                                </td>
                                                <td>
                                                    <!-- <t t-if="line.product_id.product_tmpl_id.length != 0 and line.product_id.product_tmpl_id.height != 0" t-esc="line.product_id.product_tmpl_id.length"/>mm x <t t-esc="line.product_id.product_tmpl_id.height"/>mm -->
                                                </td>
                                                <td>
                                                    <t t-esc="doc.get_right_number(line.unit_qty)"/>
                                                </td>
                                                <td>
                                                    <t t-esc="line.product_id.name"/>
                                                </td>
                                                <td>
                                                    <t t-esc="doc.get_right_number(line.price_unit)"/>
                                                    <t t-esc="doc.currency_id.symbol"/>
                                                </td>
                                                <td>
                                                    <t t-esc="doc.get_right_number(line.price_subtotal)"/>
                                                    <t t-esc="doc.currency_id.symbol"/>
                                                </td>
                                            </tr>
                                        </t>
                                        <!-- </t> -->
                                    </t>
                                    <tr t-if="total_price_type_false">
                                        <td>
                                        </td>
                                        <td>
                                        </td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td>Sous-total</td>
                                        <td></td>
                                        <td>
                                            <t t-esc="doc.get_right_number(total_price_type_false)"/>
                                            <t t-esc="doc.currency_id.symbol"/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <h6>
                            <div style="text-align:right">
                                <!-- <t t-set="amount_total_with_air_freight" t-value="doc.total_amount_ex(air_freight_price, doc.amount_total)"/> -->
                                <b>
                            Montant:
                                    <span t-esc="doc.get_right_number(doc.amount_total)"/>
                                    <t t-esc="doc.currency_id.symbol"/>
                                </b>
                            </div>
                        </h6>
                        <div style="text-align:right">
                            <!-- <span>A approuvé cette facture pour la somme de </span> -->
                            <span t-esc="doc.currency_id.with_context(lang=doc.partner_id.lang or 'en_US').amount_to_text(doc.amount_total).upper()"/>
                        </div>

                        <br/>
                        <br/>
                        <div>
                            <span>Paiement:</span>
                            <span t-field="doc.payment_method"/>
                            <t t-set="validity_date" t-value="doc.get_validity_date()"/>
                            <span>&amp;nbsp; &amp;nbsp; Date d'échéance:</span>
                            <span t-esc="validity_date.strftime('%d/%m/%Y')"/>
                        </div>
                        <t t-set="bank_company_ids" t-value="doc.get_bank_ids()"/>
                        <t t-if="bank_company_ids">

                            <div class="row">
                                <t t-foreach="bank_company_ids" t-as="bank">
                                    <div class="col-6" style="text-align: center;">
                                        <style type="text/css">
                                    p {margin-bottom: 0em;}
                                        </style>
                                        <br/>
                                        <div style="text-align: center;">
                                            <span t-esc="bank.bank_address"/>
                                        </div>
                                        <span>IBAN </span>
                                        <span t-esc="bank.bank_company_line_ids[0].account_registration"/>


                                    </div>
                                </t>
                            </div>


                        </t>
                        <br/>
                        <div class="row text-center">
                            <div class="col col-12 text-center">
                                <span>Tous les frais bancaires de la banque étrangère doivent être payés par l'acheteur, y compris remboursement des frais bancaires, des commissions, des fax et des frais postaux correspondants.</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="footer" style="border-top: 2px solid black; font-size:16px;">
                    <div class="row text-center">
                        <div class="col col-12 text-center">
                            <ul class="list-inline">
                                <li class="list-inline-item">Page:</li>
                                <li class="list-inline-item">
                                    <span class="page" />
                                </li>
                                <li class="list-inline-item">/</li>
                                <li class="list-inline-item">
                                    <span class="topage" />
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </t>
            <!-- Client type ex -->
            <t t-elif="doc.partner_id.partner_type == 'ex'">
                <div class="article mt0 o_report_layout_standard" style="font-size:14px;">
                    <div class="header_body">
                        <div class="body_header">
                            <div class="container">
                                <div class="row">
                                    <div class="col-xs-6">
                                        <img t-if="company.logo" style="max-height:80px" t-att-src="image_data_uri(company.logo)" />
                                    </div>
                                    <div class="col-xs-6" style="margin-left:250px; text-align:center">
                                        <div>
                                            <b>
                                                <t t-if="company.description">
                                                    <t t-esc="company.description" />
                                                </t>
                                                <t t-else="">Fabricant de boutons et d'étiquettes depuis 1983</t>
                                            </b>
                                            <br />
                                        </div>
                                        <div t-if="company.stat">
                                            <span>STAT:</span>
                                            <span t-esc="company.stat" />
                                        </div>
                                        <div t-if="company.nif">
                                            <span>NIF:</span>
                                            <span t-esc="company.nif" />
                                        </div>
                                        <div>
                                            <span>Lot 18 D Imerinafovoany </span>
                                        </div>
                                        <div>
                                            <span>B.p.:11064 - Tél : </span>
                                            <span t-esc="company.phone or company.mobile" />
                                        </div>
                                        <div>
                                            <span>e-mail:contact@tanacrex.com</span>
                                        </div>
                                        <div>
                                            <span>
                                        ANTANANARIVO -
                                                <b>MADAGASCAR</b>
                                            </span>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br/>
                        <div class="row">
                            <div class="col-6">
                                <div style="font-size:18px; margin-top:20px">
                                    <b>Facture: </b>
                                    <span>PROFORMA /</span>
                                    <span t-esc="doc.name" />
                                </div>
                                <div style="font-size:18px; margin-top:20px">
                                    <b>Référence:</b>
                                    <span t-esc="doc.name" />
                                </div>
                            </div>
                            <div class="col-5" style="border: 1px solid; text-align: center;">
                                <span t-field="doc.partner_id"/>
                                <t t-if="doc.partner_id.street">
                                    <span t-field="doc.partner_id.street"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.street2">
                                    <span t-field="doc.partner_id.street2"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.city">
                                    <span t-field="doc.partner_id.city"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.state_id">
                                    <span t-field="doc.partner_id.state_id"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.zip">
                                    <span t-field="doc.partner_id.zip"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.country_id">
                                    <span t-field="doc.partner_id.country_id"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.phone">
                                    <span>Tel: </span>
                                    <span t-field="doc.partner_id.phone"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.vat">
                                    <span>V.A.T: </span>
                                    <span t-field="doc.partner_id.vat"/>
                                    <br/>
                                </t>
                            </div>
                        </div>

                        <div style="margin-top:15px; margin-bottom:15px">

                            <style type="text/css">
                            th {border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif; text-align: left; padding:5px 5px; text-align: center;}
                            table {width:100%; font-size:13px; border-collapse: collapse;}
                            
                            table td {border: 1px solid #000; border-width:1px; text-align: center; border-top:hidden; border-bottom:hidden}
                            table td:first-child {text-align: center; border-bottom:hidden}
                            table td:last-child {text-align: center;}
                            </style>

                            <table>
                                <thead>
                                    <t t-set="currency" t-value="doc.currency_id.name"/>
                                    <tr>
                                        <th style="border: none"></th>
                                        <th style="border: none"></th>
                                        <th style="border: none"></th>
                                        <th style="border: none"></th>
                                        <th style="border: none"></th>
                                        <th style="border: none"></th>
                                        <th>
                                            <t t-esc="currency"/>
                                        </th>
                                        <th>
                                            <t t-esc="currency"/>
                                        </th>
                                    </tr>
                                    <tr style="background-color: rgb(211,209,209);">
                                        <th>BC</th>
                                        <th>Désignation</th>
                                        <th>TYPE</th>
                                        <th>HS Code</th>
                                        <th>Dimension</th>
                                        <th>Qté</th>
                                        <th>Prix Unitaire</th>
                                        <th>Montant</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="all_type" t-value="doc.get_all_type(doc.order_line)"/>
                                    <t t-foreach="all_type" t-as="type">
                                        <t t-set="total_price_type" t-value="doc.get_total_price_type(doc.order_line,type)"/>
                                        <t t-foreach="doc.order_line" t-as="line">
                                            <!-- <t t-set="bl_id" t-value="doc.get_delivery_order_id(line.order_origin)" />
                                            <t t-foreach="bl_id" t-as="id_bl"> -->

                                            <!-- <t t-set="bl_name" t-value="doc.get_bl_name(id_bl)" /> -->
                                            <t t-if="line.product_id.product_type == type">
                                                <tr>
                                                    <td>
                                                        <t t-if="line.order_id.sale_order_partner">
                                                            <span t-esc="line.order_id.sale_order_partner"/>
                                                        </t>
                                                        <t t-else="">
                                                            <span>-</span>
                                                        </t>
                                                    </td>
                                                    <td>
                                                        <t t-esc="line.product_id.name"/>
                                                    </td>

                                                    <td>
                                                        <t t-esc="line.product_id.product_type"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="line.product_id.hs_code.hs_code"/>
                                                    </td>
                                                    <td>
                                                        <t t-if="line.product_id.product_type == 'button'">
                                                    <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.line)"/>
                                                    L
                                                </t>
                                                <t t-elif="line.product_id.product_type == 'other'">
                                                    <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.surface)"/>
                                                    mm²
                                                </t>
                                                <t t-else="">
                                                    <t t-if="line.product_id.product_tmpl_id.form == 'rectangle'">
                                                        <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.length)"/>
                                                    mm x <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.wide)"/>
                                                    mm
                                                    </t>
                                                    <t t-elif="line.product_id.product_tmpl_id.form == 'square'">
                                                        <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.side)"/>mm x <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.side)"/>
                                                        mm
                                                    </t>
                                                    <t t-else="">
                                                        <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.surface)"/>
                                                        mm²
                                                    </t>
                                                </t>
                                                    </td>
                                                    <td>
                                                        <t t-esc="doc.get_right_number(line.unit_qty)"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="doc.get_right_number(line.price_unit)"/>
                                                        <t t-esc="doc.currency_id.symbol"/>
                                                /                                                        <t t-esc="line.product_uom.name"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="doc.get_right_number(line.price_subtotal)"/>
                                                        <t t-esc="doc.currency_id.symbol"/>
                                                    </td>
                                                </tr>
                                                <!-- </t> -->
                                            </t>
                                        </t>
                                        <tr t-if="len(all_type) > 1">
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td>Sous-total</td>
                                            <td></td>
                                            <td>
                                                <t t-esc="doc.get_right_number(total_price_type)"/>
                                                <t t-esc="doc.currency_id.symbol"/>
                                            </td>
                                        </tr>
                                    </t>

                                    <t t-set="total_price_type_false" t-value="doc.get_total_price_type(doc.order_line, False)"/>
                                    <t t-foreach="doc.order_line" t-as="line">
                                        <!-- <t t-set="bl_id" t-value="doc.get_delivery_order_id(line.order_origin)" /> -->
                                        <!-- <t t-foreach="bl_id" t-as="id_bl">
                                    <t t-set="bl_name" t-value="doc.get_bl_name(id_bl)" /> -->
                                        <t t-if="line.product_id.product_type == False and line.price_unit != 0">
                                            <tr>
                                                <td>
                                                    <t t-if="line.order_id.sale_order_partner">
                                                        <span t-esc="line.order_id.sale_order_partner"/>
                                                    </t>
                                                    <t t-else="">
                                                        <span>-</span>
                                                    </t>
                                                </td>
                                                <td>
                                                    <span t-esc="line.picking_name"/>
                                                </td>
                                                <td>
                                                    <t t-esc="line.product_id.product_type"/>
                                                </td>
                                                <td></td>
                                                <td>
                                                    <!-- <t t-if="line.product_id.product_tmpl_id.length != 0 and line.product_id.product_tmpl_id.height != 0" t-esc="line.product_id.product_tmpl_id.length"/>mm x <t t-esc="line.product_id.product_tmpl_id.height"/>mm -->
                                                </td>
                                                <td>
                                                    <t t-esc="doc.get_right_number(line.quantity)"/>
                                                </td>
                                                <td>
                                                    <t t-esc="line.product_id.name"/>
                                                </td>
                                                <td>
                                                    <t t-esc="doc.get_right_number(line.price_unit)"/>
                                                    <t t-esc="doc.currency_id.symbol"/>
                                                </td>
                                                <td>
                                                    <t t-esc="doc.get_right_number(line.price_subtotal)"/>
                                                    <t t-esc="doc.currency_id.symbol"/>
                                                </td>
                                            </tr>
                                        </t>
                                        <!-- </t> -->
                                    </t>

                                    <tr>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                    </tr>

                                    <!-- <tr t-if="total_price_type_false">
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>
                                    <t t-esc="total_price_type_false" t-options="{'widget': 'monetary', 'display_currency': doc.currency_id}"/>
                                </td>
                            </tr>
                            <tr t-if="total_price_type_false">
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>Sub-total</td>
                                <td></td>
                                <td>
                                    <t t-esc="total_price_type_false" t-options="{'widget': 'monetary', 'display_currency': doc.currency_id}"/>
                                </td>
                            </tr> -->
                                    <!-- <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td>AIR FREIGHT</td>
                                <td></td>
                                <td>
                                    <t t-set="air_freight_price" t-value="doc.env.ref('tnx_sale.product_air_freight').list_price"/>
                                    <t t-esc="air_freight_price" t-options="{'widget': 'monetary', 'display_currency': doc.currency_id}"/>
                                </td>
                            </tr> -->
                                </tbody>
                            </table>
                        </div>
                        <h6>
                            <div style="text-align:right">
                                <!-- <t t-set="amount_total_with_air_freight" t-value="doc.total_amount_ex(air_freight_price, doc.amount_total)"/> -->
                                <b>
                            Montant:
                                    <span t-esc="doc.get_right_number(doc.amount_total)"/>
                                    <t t-esc="doc.currency_id.symbol"/>
                                </b>
                            </div>
                        </h6>
                        <div style="text-align:right">
                            <!-- <span>A approuvé cette facture pour la somme de </span> -->
                            <span t-esc="doc.currency_id.with_context(lang=doc.partner_id.lang or 'en_US').amount_to_text(doc.amount_total).upper()"/>
                        </div>
                        <!-- <t t-if="doc.delivery_adress">
                    <div>
                        <b>Adresse de livraison</b>
                        <t t-esc="doc.delivery_adress" />
                    </div>
                </t> -->
                        <!-- <div style="text-align:center;margin-top:20px">
                    <span>"L'exportateur des produits couverts par le présent document (autorisation douanière
                        MGREX1000002056) déclare que, sauf indication claire du contraire, les produits sont d'origine
                        préférentielle Madagascar"</span>
                </div> -->
                        <br/>
                        <br/>
                        <div>
                            <span>Paiement:</span>
                            <span t-field="doc.payment_method"/>
                            <t t-set="validity_date" t-value="doc.get_validity_date()"/>
                            <span>&amp;nbsp; &amp;nbsp; Date d'échéance:</span>
                            <span t-esc="validity_date.strftime('%d/%m/%Y')"/>
                        </div>
                        <t t-set="bank_company_ids" t-value="doc.get_bank_ids()"/>
                        <t t-if="bank_company_ids">

                            <div class="row">
                                <t t-foreach="bank_company_ids" t-as="bank">
                                    <div class="col-6" style="text-align: center;">
                                        <style type="text/css">
                                    p {margin-bottom: 0em;}
                                        </style>
                                        <br/>
                                        <div style="text-align: center;">
                                            <span t-esc="bank.bank_address"/>
                                        </div>
                                        <span>IBAN </span>
                                        <span t-esc="bank.bank_company_line_ids[0].account_registration"/>


                                    </div>
                                </t>
                            </div>


                        </t>
                        <br/>
                        <div class="row text-center">
                            <div class="col col-12 text-center">
                                <span>Tous les frais bancaires de la banque étrangère doivent être payés par l'acheteur, y compris remboursement des frais bancaires, des commissions, des fax et des frais postaux correspondants.</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="footer" style="border-top: 2px solid black; font-size:16px;">
                    <div class="row text-center">
                        <div class="col col-12 text-center">
                            <ul class="list-inline">
                                <li class="list-inline-item">Page:</li>
                                <li class="list-inline-item">
                                    <span class="page" />
                                </li>
                                <li class="list-inline-item">/</li>
                                <li class="list-inline-item">
                                    <span class="topage" />
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </t>

            <!-- Client type ls -->
            <t t-elif="doc.partner_id.partner_type == 'ls'">
                <div class="article mt0 o_report_layout_standard" style="font-size:14px;">
                    <div class="header_body">
                        <div class="body_header">
                            <div class="container">
                                <div class="row">
                                    <div class="col-xs-6">
                                        <img t-if="company.logo" style="max-height:80px" t-att-src="image_data_uri(company.logo)" />
                                    </div>
                                    <div class="col-xs-6" style="margin-left:250px; text-align:center">
                                        <div>
                                            <b>
                                                <t t-if="company.description">
                                                    <t t-esc="company.description" />
                                                </t>
                                                <t t-else="">Fabricant de boutons et d'étiquettes depuis 1983</t>
                                            </b>
                                            <br />
                                        </div>
                                        <div t-if="company.stat">
                                            <span>STAT:</span>
                                            <span t-esc="company.stat" />
                                        </div>
                                        <div t-if="company.nif">
                                            <span>NIF:</span>
                                            <span t-esc="company.nif" />
                                        </div>
                                        <div>
                                            <span>Lot 18 D Imerinafovoany </span>
                                        </div>
                                        <div>
                                            <span>B.p.:11064 - Tél : </span>
                                            <span t-esc="company.phone or company.mobile" />
                                        </div>
                                        <div>
                                            <span>e-mail:contact@tanacrex.com</span>
                                        </div>
                                        <div>
                                            <span>
                                                ANTANANARIVO -
                                                <b>MADAGASCAR</b>
                                            </span>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br/>
                        <div class="row">
                            <div class="col-6">
                                <div style="font-size:18px; margin-top:20px">
                                    <b>Facture: </b>
                                    <span>PROFORMA /</span>
                                    <span t-esc="doc.name" />
                                </div>
                                <div style="font-size:18px; margin-top:20px">
                                    <b>Référence:</b>
                                    <span t-esc="doc.name" />
                                </div>
                            </div>
                            <div class="col-5" style="border: 1px solid; text-align: center;">
                                <span t-field="doc.partner_id"/>
                                <t t-if="doc.partner_id.street">
                                    <span t-field="doc.partner_id.street"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.street2">
                                    <span t-field="doc.partner_id.street2"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.city">
                                    <span t-field="doc.partner_id.city"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.state_id">
                                    <span t-field="doc.partner_id.state_id"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.zip">
                                    <span t-field="doc.partner_id.zip"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.country_id">
                                    <span t-field="doc.partner_id.country_id"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.phone">
                                    <span>Tel: </span>
                                    <span t-field="doc.partner_id.phone"/>
                                    <br/>
                                </t>
                                <t t-if="doc.partner_id.vat">
                                    <span>V.A.T: </span>
                                    <span t-field="doc.partner_id.vat"/>
                                    <br/>
                                </t>
                            </div>
                        </div>

                        <div style="margin-top:15px; margin-bottom:15px">

                            <style type="text/css">
                                    th {border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif; text-align: left; padding:5px 5px; text-align: center;}
                                    table {width:100%; font-size:13px; border-collapse: collapse;}
                                    
                                    table td {border: 1px solid #000; border-width:1px; text-align: center; border-top:hidden; border-bottom:hidden}
                                    table td:first-child {text-align: center; border-bottom:hidden}
                                    table td:last-child {text-align: center;}
                            </style>
                            <br/>
                            <table>
                                <thead>
                                    <t t-set="currency" t-value="doc.currency_id.name"/>
                                    <tr>
                                        <th style="border: none"></th>
                                        <th style="border: none"></th>
                                        <th style="border: none"></th>
                                        <th style="border: none"></th>
                                        <th style="border: none"></th>
                                        <th style="border: none"></th>
                                        <th>
                                            <t t-esc="currency"/>
                                        </th>
                                        <th>
                                            <t t-esc="currency"/>
                                        </th>
                                    </tr>
                                    <tr style="background-color: rgb(211,209,209);">
                                        <th>BC</th>
                                        <th>Désignation</th>
                                        <th>TYPE</th>
                                        <th>HS Code</th>
                                        <th>Dimension</th>
                                        <th>Qté</th>
                                        <th>Prix Unitaire</th>
                                        <th>Montant TTC</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="all_type" t-value="doc.get_all_type(doc.order_line)"/>
                                    <t t-foreach="all_type" t-as="type">
                                        <t t-set="total_price_type" t-value="doc.get_total_price_type(doc.order_line,type)"/>
                                        <t t-foreach="doc.order_line" t-as="line">
                                            <!-- <t t-set="bl_id" t-value="doc.get_delivery_order_id(line.order_origin)" />
                                                    <t t-foreach="bl_id" t-as="id_bl"> -->

                                            <!-- <t t-set="bl_name" t-value="doc.get_bl_name(id_bl)" /> -->
                                            <t t-if="line.product_id.product_type == type">
                                                <tr>
                                                    <td>
                                                        <t t-if="line.order_id.sale_order_partner">
                                                            <span t-esc="line.order_id.sale_order_partner"/>
                                                        </t>
                                                        <t t-else="">
                                                            <span>-</span>
                                                        </t>
                                                    </td>
                                                    <td>
                                                        <t t-esc="line.product_id.name"/>
                                                    </td>

                                                    <td>
                                                        <t t-esc="line.product_id.product_type"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="line.product_id.hs_code.hs_code"/>
                                                    </td>
                                                    <td>
                                                        <t t-if="line.product_id.product_type == 'button'">
                                                            <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.line)"/>
                                                            L
                                                        </t>
                                                        <t t-elif="line.product_id.product_type == 'other'">
                                                            <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.surface)"/>
                                                            mm²
                                                            </t>
                                                        <t t-else="">
                                                            <t t-if="line.product_id.product_tmpl_id.form == 'rectangle'">
                                                                <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.length)"/>
                                                                mm x <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.wide)"/>
                                                                mm
                                                            </t>
                                                            <t t-elif="line.product_id.product_tmpl_id.form == 'square'">
                                                                <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.side)"/>mm x <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.side)"/>
                                                                mm
                                                            </t>
                                                            <t t-else="">
                                                                <t t-esc="doc.get_right_number(line.product_id.product_tmpl_id.surface)"/>
                                                                    mm²
                                                            </t>
                                                        </t>
                                                    </td>
                                                    <td>
                                                        <t t-esc="doc.get_right_number(line.unit_qty)"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="doc.get_right_number(line.price_unit)"/>
                                                        <t t-esc="doc.currency_id.symbol"/>
                                                        /                                                        <t t-esc="line.product_uom.name"/>
                                                    </td>
                                                    <td>
                                                        <t t-esc="doc.get_right_number(doc.amount_ttc_ls(line.price_subtotal))"/>
                                                        <t t-esc="doc.currency_id.symbol"/>
                                                    </td>
                                                </tr>
                                                <!-- </t> -->
                                            </t>
                                        </t>
                                        <tr t-if="len(all_type) > 1">
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td></td>
                                            <td>Sous-total</td>
                                            <td></td>
                                            <td>
                                                <t t-esc="doc.get_right_number(doc.amount_ttc_ls(total_price_type))"/>
                                                <t t-esc="doc.currency_id.symbol"/>
                                            </td>
                                        </tr>
                                    </t>

                                    <t t-set="total_price_type_false" t-value="doc.get_total_price_type(doc.order_line, False)"/>
                                    <t t-foreach="doc.order_line" t-as="line">
                                        <!-- <t t-set="bl_id" t-value="doc.get_delivery_order_id(line.order_origin)" /> -->
                                        <!-- <t t-foreach="bl_id" t-as="id_bl">
                                            <t t-set="bl_name" t-value="doc.get_bl_name(id_bl)" /> -->
                                        <t t-if="line.product_id.product_type == False and line.price_unit != 0">
                                            <tr>
                                                <td>
                                                    <t t-if="line.order_id.sale_order_partner">
                                                        <span t-esc="line.order_id.sale_order_partner"/>
                                                    </t>
                                                    <t t-else="">
                                                        <span>-</span>
                                                    </t>
                                                </td>
                                                <td>
                                                    <span t-esc="line.picking_name"/>
                                                </td>
                                                <td>
                                                    <t t-esc="line.product_id.product_type"/>
                                                </td>
                                                <td></td>
                                                <td>
                                                    <!-- <t t-if="line.product_id.product_tmpl_id.length != 0 and line.product_id.product_tmpl_id.height != 0" t-esc="line.product_id.product_tmpl_id.length"/>mm x <t t-esc="line.product_id.product_tmpl_id.height"/>mm -->
                                                </td>
                                                <td>
                                                    <t t-esc="o.get_right_number(line.quantity)"/>
                                                </td>
                                                <td>
                                                    <t t-esc="line.product_id.name"/>
                                                </td>
                                                <td>
                                                    <t t-esc="o.get_right_number(line.price_unit)"/>
                                                    <t t-esc="doc.currency_id.symbol"/>
                                                </td>
                                                <td>
                                                    <t t-esc="o.get_right_number(line.price_subtotal)"/>
                                                    <t t-esc="doc.currency_id.symbol"/>
                                                </td>
                                            </tr>
                                        </t>
                                        <!-- </t> -->
                                    </t>
                                    <!-- <tr t-if="total_price_type_false">
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td>
                                            <t t-esc="total_price_type_false" t-options="{'widget': 'monetary', 'display_currency': doc.currency_id}"/>
                                        </td>
                                    </tr>
                                    <tr t-if="total_price_type_false">
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td>Sub-total</td>
                                        <td></td>
                                        <td>
                                            <t t-esc="total_price_type_false" t-options="{'widget': 'monetary', 'display_currency': doc.currency_id}"/>
                                        </td>
                                    </tr> -->
                                    <!-- <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td>AIR FREIGHT</td>
                                        <td></td>
                                        <td>
                                            <t t-set="air_freight_price" t-value="doc.env.ref('tnx_sale.product_air_freight').list_price"/>
                                            <t t-esc="air_freight_price" t-options="{'widget': 'monetary', 'display_currency': doc.currency_id}"/>
                                        </td>
                                    </tr> -->
                                    <tr>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                        <td style="border-bottom: 1px solid #000;"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <h6>
                            <div style="text-align:right">
                                <b>
                                    Montant HT:
                                    <span t-esc="doc.get_right_number(doc.amount_untaxed)"/>
                                    <t t-esc="doc.currency_id.symbol"/>
                                </b>
                            </div>
                        </h6>
                        <h6>
                            <div style="text-align:right">
                                <b>
                                    TVA 20%:
                                    <span t-esc="doc.get_right_number(doc.amount_tax)"/>
                                    <t t-esc="doc.currency_id.symbol"/>
                                </b>
                            </div>
                        </h6>
                        <h6>
                            <div style="text-align:right">
                                <b>
                                    Montant TTC:
                                    <span t-esc="doc.get_right_number(doc.amount_total)"/>
                                    <t t-esc="doc.currency_id.symbol"/>
                                </b>
                            </div>
                        </h6>
                        <div style="text-align:right">
                            <!-- <span>A approuvé cette facture pour la somme de </span> -->
                            <span t-esc="doc.currency_id.with_context(lang=doc.partner_id.lang or 'en_US').amount_to_text(doc.amount_total).upper()"/>
                        </div>
                        <!-- <t t-if="doc.delivery_adress">
                            <div>
                                <b>Adresse de livraison</b>
                                <t t-esc="doc.delivery_adress" />
                            </div>
                        </t> -->
                        <!-- <div style="text-align:center;margin-top:20px">
                            <span>"L'exportateur des produits couverts par le présent document (autorisation douanière
                                MGREX1000002056) déclare que, sauf indication claire du contraire, les produits sont d'origine
                                préférentielle Madagascar"</span>
                        </div> -->

                        <br/>
                        <br/>
                        <div t-if="doc.payment_method">
                            <span>Paiement:</span>
                            <span t-field="doc.payment_method"/>
                            <t t-set="validity_date" t-value="doc.get_validity_date()"/>
                            <span>&amp;nbsp; &amp;nbsp; Date d'échéance:</span>
                            <span t-esc="validity_date.strftime('%d/%m/%Y')"/>
                        </div>
                        <t t-set="bank_company_ids" t-value="doc.get_bank_ids()"/>
                        <t t-if="bank_company_ids">

                            <div class="row">
                                <t t-foreach="bank_company_ids" t-as="bank">
                                    <div class="col-6" style="text-align: center;">
                                        <style type="text/css">
                                            p {margin-bottom: 0em;}
                                        </style>
                                        <br/>
                                        <div style="text-align: center;">
                                            <span t-esc="bank.bank_address"/>
                                        </div>
                                        <span>IBAN </span>
                                        <span t-esc="bank.bank_company_line_ids[0].account_registration"/>


                                    </div>
                                </t>
                            </div>


                        </t>
                        <br/>
                        <div class="row text-center">
                            <div class="col col-12 text-center">
                                <span>Tous les frais bancaires de la banque étrangère doivent être payés par l'acheteur, y compris remboursement des frais bancaires, des commissions, des fax et des frais postaux correspondants.</span>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="footer" style="border-top: 2px solid black; font-size:16px;">
                    <div class="row text-center">
                        <div class="col col-12 text-center">
                            <ul class="list-inline">
                                <li class="list-inline-item">Page:</li>
                                <li class="list-inline-item">
                                    <span class="page" />
                                </li>
                                <li class="list-inline-item">/</li>
                                <li class="list-inline-item">
                                    <span class="topage" />
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </t>

        </template>

        <record id="sale.action_report_pro_forma_invoice" model="ir.actions.report">
            <field name="paperformat_id" ref="tnx_base.paperformat_tanacrex_report" />
        </record>


        <record id="sale.action_report_saleorder" model="ir.actions.report">
            <field name="paperformat_id" ref="tnx_base.paperformat_tanacrex_report" />
        </record>


    </odoo>
